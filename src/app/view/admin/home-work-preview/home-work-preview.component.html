<div class="p-grid topBar">
    <div class="p-col-3 ">
        <h5>Levels</h5>
        <p-dropdown [options]="parcours" [(ngModel)]="selectedparcours"
                    (ngModelChange)="getCours()"
                    [style]="{'width': '100%'}"
                    optionLabel="libelle" [filter]="true" filterBy="libelle" [showClear]="true"
                    placeholder="Select a Level">
        </p-dropdown>

    </div>

    <div class="p-col-3 ">
        <h5>Courses</h5>
        <p-dropdown [options]="cours" [(ngModel)]="selectedcours"
                    (ngModelChange)="getHomeWorks()"
                    [style]="{'width': '100%'}"
                    optionLabel="libelle" [filter]="true" filterBy="libelle" [showClear]="true"
                    placeholder="Select a Course">
        </p-dropdown>
    </div>
</div>

<div class="p-grid contentBar">
    <div class="p-col-12">
        <p-table [value]="homeWorks" responsiveLayout="scroll" [paginator]="true" [rows]="rows"
                 [showCurrentPageReport]="true"
                 [(first)]="first"
                 currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                 [rowsPerPageOptions]="[10,25,50]">
            <ng-template pTemplate="caption">

                <div class="p-grid">
                    <div class="p-col-3">
                        <input class="searchValue" [(ngModel)]="homeWork.libelle" type="text" pInputText
                               placeholder="Search by Title.."/>
                    </div>
                    <div class="p-col-3">
                        <button pButton pRipple type="button" (click)="findHomeWork()"
                                icon="pi pi-search" class="p-button-rounded searchButton p-button-text"></button>
                    </div>
                </div>

            </ng-template>


            <ng-template pTemplate="header">
                <tr>
                    <th>ID</th>
                    <th>title</th>
                    <th>Image</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-homework>
                <tr>
                    <td>{{homework?.id}}</td>
                    <td>{{homework?.libelle}}</td>
                    <td><img [src]="homework?.urlImage" width="75%" (click)="showImage(homework.urlImage)"
                             class="shadow-4"/></td>
                    <td><span class="badge">VALIDATED</span></td>
                    <td>
                        <button (click)="view(homework)"
                                class="p-button-rounded p-button-info p-mr-2" icon="pi pi-list" pButton
                                pRipple></button>
                        <button (click)="edit(homework)"
                                class="p-button-rounded p-button-success p-mr-2" icon="pi pi-pencil" pButton
                                pRipple></button>

                        <button (click)="delete(homework)" class="p-button-rounded p-button-danger"
                                icon="pi pi-trash" pButton
                                pRipple></button>


                    </td>

                </tr>
            </ng-template>
            <ng-template pTemplate="summary">
                <div class="flex align-items-center justify-content-between">
                    In total there are {{ homeWorks?.length }} HomeWork.
                </div>
            </ng-template>
        </p-table>

    </div>
</div>

<p-sidebar [(visible)]="visibleSidebar" [fullScreen]="true" [baseZIndex]="10000">
    <img [src]="imgUrl" width="100%" height="100%" class="shadow-5"/>
</p-sidebar>


<!-----------------------------------------------------Questions  Dialog ------------------------------------>

<p-dialog header="Questions" [(visible)]="showEditDialog" [style]="{width: '70vw'}">
    <div class="p-grid">
        <p-table [value]="qstList" responsiveLayout="scroll" [paginator]="true" [rows]="rows"
                 [showCurrentPageReport]="true"
                 [(first)]="first"
                 currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                 [rowsPerPageOptions]="[10,25,50]">
            <ng-template pTemplate="caption">

                <div class="p-grid">
                    <div class="p-col-3">
                        <input class="searchValue" [(ngModel)]="homeWork.libelle" type="text" pInputText
                               placeholder="Search by Title.."/>
                    </div>
                    <div class="p-col-3">
                        <button pButton pRipple type="button" (click)="findHomeWork()"
                                icon="pi pi-search" class="p-button-rounded searchButton p-button-text"></button>
                    </div>
                </div>

            </ng-template>


            <ng-template pTemplate="header">
                <tr>
                    <th>Number</th>
                    <th>Question</th>
                    <th>Type of question</th>
                    <th>Correct answer</th>
                    <th>Incorrect answer</th>
                    <th>Answers</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-qst>
                <tr>
                    <td>{{qst?.numero}}</td>
                    <td>{{qst?.libelle}}</td>
                    <td>{{qst?.typeDeQuestion?.lib}}</td>
                    <td>{{qst?.pointReponseJuste}}</td>
                    <td>{{qst?.pointReponsefausse}}</td>
                    <td>
                        <button (click)="showAnswers(qst)"
                                class="p-button-rounded p-button-info p-mr-2" icon="pi pi-list" pButton
                                pTooltip="Answers" tooltipPosition="top"
                                pRipple></button>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="summary">
                <div class="flex align-items-center justify-content-between">
                    In total there are {{ qstList?.length }} Questions.
                </div>
            </ng-template>
        </p-table>

    </div>

</p-dialog>


<!-----------------------------------------------------Answers of question  Dialog ------------------------------------>

<p-dialog header="Answers" [(visible)]="showAnswersDialog" [style]="{width: '50vw'}">
    <div class="p-grid">
        <p-table [value]="answers" responsiveLayout="scroll" [paginator]="true" [rows]="rows"
                 [showCurrentPageReport]="true"
                 [(first)]="first"
                 currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                 [rowsPerPageOptions]="[10,25,50]">

            <ng-template pTemplate="header">
                <tr>
                    <th>Number</th>
                    <th>Answer</th>
                    <th>State</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-reponse>
                <tr>
                    <td>{{reponse?.numero}}</td>
                    <td>{{reponse?.lib}}</td>
                    <td>{{reponse?.etatReponse}}</td>


                </tr>
            </ng-template>
            <ng-template pTemplate="summary">
                <div class="flex align-items-center justify-content-between">
                    In total there are {{ qstList?.length }} Answers.
                </div>
            </ng-template>
        </p-table>
    </div>
</p-dialog>
