<!-----------------------------------------------------List of users-------------------------------------------------------->

<div class="p-grid p-shadow-5">

    <div class="p-col-10">
            <input type="search" [(ngModel)]="etudiant.nom" class='searchInput' pInputText placeholder="Search by firstName.."/>
            <input type="search" [(ngModel)]="etudiant.prenom"  class='searchInput' pInputText placeholder="Search by lastName.."/>
            <input type="search" [(ngModel)]="etudiant.prof.nom"  class='searchInput' pInputText placeholder="Search by teacher.."/>
            <button pButton pRipple type="button" icon="pi pi-search" (click)="searchUsers()"
                    style="margin-left: 25px"
                    class="p-button-rounded p-button-success"></button>

    </div>


<!--    <div class="p-col-6" style="text-align: right">-->
<!--        <button pButton pRipple label="New student" type="button" icon="pi pi-user-plus" (click)="showAddUserDialog()"-->
<!--                class="p-button-rounded  p-button-success"></button>-->
<!--    </div>-->

    <div class="p-col-12">

        <div class="card">
            <h5>Students</h5>
            <div class="p-mb-3">
                <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" [disabled]="isFirstPage()"
                          styleClass="p-button-text"></p-button>
                <p-button type="button" icon="pi pi-refresh" (click)="reset()" styleClass="p-button-text"></p-button>
                <p-button type="button" icon="pi pi-chevron-right" (click)="next()" [disabled]="isLastPage()"
                          styleClass="p-button-text"></p-button>
            </div>
            <p-table [resizableColumns]="true" [value]="users" [paginator]="true" [rows]="rows" [showCurrentPageReport]="true"
                     [(first)]="first" responsiveLayout="scroll"
                     currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                     [rowsPerPageOptions]="[10,25,50]">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Username</th>
                        <th>City</th>
                        <th>Parcours</th>
                        <th>Teacher</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-user>
                    <tr>
                        <td>{{user?.id}}</td>
                        <td>{{user?.nom}} {{ user?.prenom}}</td>
                        <td>{{user?.username}}</td>
                        <td>{{user?.ville}}</td>
                        <td>{{user?.parcours?.libelle}}</td>
                        <td>{{user?.prof?.nom}} {{ user?.prof?.prenom}}</td>
                        <td>
                            <button pButton pRipple type="button" icon="pi pi-user-edit" (click)="showEditDialog(user)"
                                    class="p-button-rounded p-button-warning"></button>
                            <button pButton pRipple type="button" icon="pi pi-times"
                                    (click)="showDeleteDialog(user,index)"
                                    class="p-button-rounded p-button-danger"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>


</div>


<!------------------------ delete User Dialog -------------------------------------------------->


<p-dialog id="delete-dialog" [(visible)]="deleteDialog" [style]="{width: '40vw'}"
          [draggable]="false" [resizable]="false">
    <h4>Are you sure you want to delete this user!</h4>
    <ng-template pTemplate="footer">
        <p-button (click)="deleteDialog=false" label="No" styleClass="p-button-text"></p-button>
        <p-button (click)="deleteDialog=false; deleteUser()" label="Yes" styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>


<!------------------------ edit User Dialog -------------------------------------------------->


<p-dialog header="User information" [(visible)]="editDialog" [style]="{width: '70vw'}">

    <div class="p-grid">

        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="text" pInputText [(ngModel)]="userInfo.prenom"><label>First name</label>
            </span>
        </div>

        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="text" pInputText [(ngModel)]="userInfo.nom"><label>Last name</label>
            </span>
        </div>


        <div class="p-col-4">
            <span class="p-float-label">
                 <input disabled type="text" pInputText [(ngModel)]="userInfo.username"><label
            >Username</label>
            </span>
        </div>


        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="number" pInputText [(ngModel)]="userInfo.age"><label
            >Age</label>
            </span>
        </div>


        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="text" pInputText [(ngModel)]="userInfo.addresse"><label
            >Address</label>
            </span>
        </div>


        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="text" pInputText [(ngModel)]="userInfo.numero"><label
            >Phone</label>
            </span>
        </div>

        <div class="p-col-4">
            <span class="p-float-label">
                 <input type="text" pInputText [(ngModel)]="userInfo.ville"><label
            >City</label>
            </span>
        </div>

        <div class="p-col-4">
        </div>

        <div class="p-col-4">


        </div>


    </div>


    <ng-template pTemplate="footer">
        <button pButton pRipple type="button" icon="pi pi-save" label="save changes"
                (click)="updateOtherUser(userInfo) ; editDialog=false"
                class="p-button-raised-primary"></button>
    </ng-template>
</p-dialog>


<!------------------------ New User Dialog -------------------------------------------------->


<!--<p-dialog header="Student information" [(visible)]="newUserDialog"-->
<!--          [style]="{width: '70vw'}">-->
<!--    <div content class=" p-dialog-content">-->
<!--        <div class="p-grid">-->

<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="text" pInputText [(ngModel)]="newUser.prenom"><label>First name</label>-->
<!--            </span>-->
<!--            </div>-->

<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="text" pInputText [(ngModel)]="newUser.nom"><label>Last name</label>-->
<!--            </span>-->
<!--            </div>-->


<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input required type="text" pInputText [(ngModel)]="newUser.username"><label-->
<!--            >Username</label>-->
<!--            </span>-->
<!--            </div>-->


<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="number" pInputText [(ngModel)]="newUser.age"><label-->
<!--            >Age</label>-->
<!--            </span>-->
<!--            </div>-->


<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="text" pInputText [(ngModel)]="newUser.addresse"><label>Address</label>-->
<!--            </span>-->
<!--            </div>-->


<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="text" pInputText [(ngModel)]="newUser.numero"><label-->
<!--            >Phone</label>-->
<!--            </span>-->
<!--            </div>-->

<!--            <div class="p-col-4">-->
<!--            <span class="p-float-label">-->
<!--                 <input type="text" pInputText [(ngModel)]="newUser.ville"><label-->
<!--            >City</label>-->
<!--            </span>-->
<!--            </div>-->

<!--            <div class="p-col-4">-->
<!--                <p-dropdown [options]="parcours" [(ngModel)]="newUser.p" placeholder="Select a City" optionLabel="name" [showClear]="true"></p-dropdown>-->
<!--            </div>-->

<!--        </div>-->
<!--    </div>-->

<!--    <ng-template pTemplate="footer">-->
<!--        <button pButton pRipple type="button" icon="pi pi-save" label="save"-->
<!--                (click)="addNewUser() ; newUserDialog=false"-->
<!--                class="p-button-raised-primary"></button>-->
<!--    </ng-template>-->
<!--</p-dialog>-->
