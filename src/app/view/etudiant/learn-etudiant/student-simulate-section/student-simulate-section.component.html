<div class="card toopBar">
    <div class="p-grid">
        <div class="p-col-4">

            <button *ngIf="!showLesson" pButton pRipple type="button" label="LESSON"
                    (click)="showLesson = true"
                    class=" p-button-secondary  Topbutton p-button-outlined">
                <img src="./assets/icons/icons-lesson.png" class="homeWorkIcon">
            </button>

            <button *ngIf="showLesson" pButton pRipple type="button"
                    label="LESSON"
                    class=" clickedButton p-button-outlined  Topbutton">
                <img src="./assets/icons/icons-lesson.png" class="homeWorkIcon">
            </button>


            <button *ngIf="showLesson" pButton pRipple type="button" label="HOMEWORK"
                    (click)="showLesson = false"
                    class=" p-button-secondary Topbutton p-button-outlined">
                <img src="./assets/icons/home-work-icon.png" class="homeWorkIcon">
            </button>

            <button *ngIf="!showLesson" pButton pRipple type="button" label="HOMEWORK"
                    class=" clickedButton Topbutton  p-button-outlined ">
                <img src="./assets/icons/home-work-icon.png" class="homeWorkIcon">
            </button>


        </div>


        <div class="p-col-4">
            <h4 class="title"> {{selectedcours?.numeroOrder}}  {{selectedcours?.libelle}}</h4>
        </div>


        <div class="p-col-1">
            <p-overlayPanel #op [style]="{width: '400px'}"
                            [showTransitionOptions]="'0ms'" [hideTransitionOptions]="'0ms'" [dismissable]="true"
                            [showCloseIcon]="false">
                <ng-template pTemplate>
                    <p-table [value]="participants.get(prof.id)" [scrollable]="true" scrollHeight="400px">
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="min-width:200px">Full Name</th>
                                <th style="min-width:200px">Status</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-etudiant>
                            <tr>
                                <td>{{etudiant?.nom }} {{ etudiant?.prenom }}</td>
                                <td>
                                    <button *ngIf=" etudiant.id === loginService.getConnectedStudent().id"
                                            style="width: 15px;height: 0" pButton pRipple
                                            type="button" icon="pi pi-circle-fill"
                                            class="p-button-rounded p-button-success">
                                    </button>
                                    <button *ngIf="studentsEnLigne.get(etudiant.id) === undefined && etudiant.id !== loginService.getConnectedStudent().id"
                                            style="width: 15px;height: 0" pButton pRipple
                                            type="button" icon="pi pi-circle-fill"
                                            class="p-button-rounded p-button-danger">
                                    </button>
                                    <button *ngIf="studentsEnLigne.get(etudiant.id) !== undefined && etudiant.id !== loginService.getConnectedStudent().id"
                                            style="width: 15px;height: 0" pButton pRipple
                                            type="button" icon="pi pi-circle-fill"
                                            class="p-button-rounded p-button-success">
                                    </button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-template>
            </p-overlayPanel>

            <button pButton pRipple type="button" icon="pi pi-users"
                    (click)="op.toggle($event); getData()"
                    class="p-button-rounded  leftButton p-button-outlined">

            </button>
        </div>

        <div class="p-col-1">
            <button pButton pRipple type="button" (click)="getLanguages();op1.toggle($event);" iconPos="left"
                    pTooltip="Choose your native language" tooltipPosition="top"
                    icon="pi pi-globe"
                    [label]="selectedLanguage.code.toUpperCase()"
                    class="p-button-rounded leftButton  p-button-outlined "></button>

            <p-overlayPanel #op1
                            [showTransitionOptions]="'0ms'" [hideTransitionOptions]="'0ms'" [dismissable]="true"
                            [showCloseIcon]="false">
                <ng-template pTemplate>
                    <p-listbox [options]="getLanguages()" (onChange)="getSelectedLanguage()"
                               [(ngModel)]="selectedLanguage" optionLabel="name"
                               [style]="{'border':'none', 'width': '10rem'}"></p-listbox>

                </ng-template>
            </p-overlayPanel>
        </div>

        <div class="p-col-1">
            <button pButton pRipple type="button" icon="pi pi-fw pi-power-off" label="Quit"
                    (click)="closeSession()" routerLink="/"
                    class="p-button-rounded  leftButton  p-button-outlined">

            </button>
        </div>
    </div>
</div>

<div class=" card" style="background-color: transparent">
    <div class="p-grid" style=" padding:10px">
        <div class="p-col-12 middleBar">
            <div class="p-grid">

                <div *ngIf="showLesson" class="p-col-9">
                    <div class="p-grid sectionLibelle">
                        {{this.selectedsection.libelle}}
                    </div>


                    <div class="p-col" style="background-color: white" (mouseup)="dict()">
                        <div class="product-grid-item ">
                            <div *ngIf="showVocabulary===false" class="product-grid-item-content">
                                <!--                                        <div class="product-name"-->
                                <!--                                             style="margin-bottom: 15px; background-color: orange; color: white">-->
                                <!--                                            <h1>{{this.selectedsection.libelle}}</h1>-->
                                <!--                                        </div>-->
                                <!-- <iframe *ngIf=" this.selectedsection.libelle != 'Watch the video' && this.selectedsection.urlImage != null"
                                           [src]='photoURL() | safe' loading="lazy" width="400" height="200" ></iframe> -->
                                <div style="width: 100%;margin: 0 auto">
                                    <img *ngIf=" this.selectedsection.urlImage && !this.selectedsection.urlVideo"
                                         src="{{photoURL()}}"
                                         style="width: 100%">
                                    <iframe *ngIf="this.selectedsection.urlVideo && !this.selectedsection.urlImage"
                                            [src]='URLVideo() | safe'
                                            allowfullscreen loading="lazy"
                                            style="width: 100% ;height: 500px;"></iframe>
                                    <div *ngIf="this.selectedsection.urlVideo && this.selectedsection.urlImage"
                                         style="width: 100%;">
                                        <img src="{{photoURL()}}" style="width: 100%">
                                        <div>
                                            <iframe [src]='URLVideo() | safe' allowfullscreen
                                                    loading="lazy" style="width: 100%;"></iframe>
                                        </div>

                                    </div>
                                    <img *ngIf="!this.selectedsection.urlImage && !this.selectedsection.urlVideo"
                                         src="../../../../../assets/notfound.jpg" style="width: 100%">


                                    <div *ngIf=" this.selectedsection.contenu != null && this.selectedsection.urlVideo == null">
                                        <h3 (mouseup)="dict()"
                                            style=" background-color: white;white-space: pre-wrap; font-family: Great Vibes, cursive; font-size: 200%;line-height: 60px; text-align: left ;margin-left: 50px ;">{{this.selectedsection.contenu}}</h3>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="showVocabulary===true" class="p-col">
                                <app-vocabulary-section (someEvent)="return($event)"></app-vocabulary-section>
                            </div>
                        </div>
                        <div style="position: relative;margin-top: 50px"
                             *ngIf="!this.webSocketService.isInSession">
                            <button (click)="PreviousSection()"
                                    [style.visibility]="(this.selectedsection.numeroOrder != 1)? 'visible':'hidden'"
                                    class="p-button-warning" icon="pi pi-caret-left" id="previous"
                                    label="Previous" pButton pRipple

                                    type="button"></button>


                            <button (click)="NextSection()"
                                    [style.visibility]="(this.selectedsection.numeroOrder < this.sectionStandard.length)? 'visible':'hidden'"
                                    class="p-button-warning" icon="pi pi-caret-right" id="next"
                                    [label]="nextSection(selectedsection)"
                                    pButton pRipple
                                    type="button"></button>


                            <button *ngIf="!this.coursecomplited"
                                    (click)="finish()"
                                    [style.visibility]="(this.selectedsection.numeroOrder < this.itemssection2.length)? 'hidden':'visible'"
                                    class="p-button-warning" icon="pi pi-check" label="Finish" pButton pRipple
                                    type="button"></button>
                            <button *ngIf="this.coursecomplited"
                                    (click)="navigate()"
                                    [style.visibility]="(this.selectedsection.numeroOrder < this.itemssection2.length)? 'hidden':'visible'"
                                    class="p-button-warning" icon="pi pi-check" label="Bach to All Course"
                                    pButton
                                    pRipple
                                    style=" width: 160px; background-color: orange; position: absolute;right: 15px;"
                                    type="button"></button>
                        </div>
                    </div>


                    <div *ngIf="this.selectedQuiz.section.id == this.selectedsection.id" class="p-col quiz">
                        <app-quiz-etudiant-view *ngIf="quizView"></app-quiz-etudiant-view>
                        <app-quiz-take *ngIf="!quizView"></app-quiz-take>
                    </div>
                    <!--                    <p-tabView>-->
                    <!--                        <p-tabPanel header="LESSON">-->
                    <!--                            -->
                    <!--                        </p-tabPanel>-->

                    <!--                        <p-tabPanel header="QUIZ">-->
                    <!--                           -->
                    <!--                        </p-tabPanel>-->

                    <!--                    </p-tabView>-->
                </div>


                <div class="p-col-3 product-grid-item">
                    <div class="skipeContainer">
                        <img src="./assets/icons/icon-book.png" alt="">
                        <h4 id="startText">Let's Start</h4>
                    </div>

                    <div class="p-inputgroup" style="margin-bottom: 10px;">
                        <input type="search" pInputText
                               [(ngModel)]="searchInput"
                               placeholder="Enter a word">
                        <button type="button" pButton pRipple
                                class="btndark"
                                (click)="findAllSynonimes(searchInput); opdict.toggle($event)"
                                icon="pi pi-plus"></button>
                    </div>
                    <p-overlayPanel #opdict [showCloseIcon]="false" [style]="{width: '340px'}">
                        <ng-template pTemplate>
                            <div style="cursor: pointer" (click)="addToDictionary(); opdict.hide()">
                                <div class="dict">{{searchInput}}</div>
                                <div class="dict">:</div>
                                <div class="dict">{{synonymes}}</div>
                            </div>

                        </ng-template>
                    </p-overlayPanel>
                    <div class="product-grid-item-content" style="background-color: white;">
                        <div class="card">
                            <p-tabView styleClass="tabview-custom">
                                <p-tabPanel>
                                    <ng-template pTemplate="header">
                                        <img src="./assets/icons/icons-lesson.png"
                                             pTooltip="Lessons" tooltipPosition="top"
                                             class="homeWorkIcon">
                                    </ng-template>
                                    <div id="categoriess" style="width: 100%;margin-top: 15px">


                                        <p-table [value]="sectionStandard" id="categ"
                                                 style="margin-top: 20px; margin-right: 30px;">

                                            <ng-template let-section pTemplate="body">

                                                <tr class="timeline">

                                                    <li>
                                                        <td [style.color]="(section.categorieSection.libelle) == (this.selectedsection.categorieSection.libelle)? 'orange' :'black' "
                                                            style="cursor: pointer;
                                                                 font-weight: 600;margin-left: 5px; font-size: 15px">
                                                            {{section.categorieSection.libelle}}</td>
                                                    </li>
                                                </tr>


                                            </ng-template>
                                        </p-table>


                                        <div style="background-color: #e9ecef"><h6 style="color: black ">ADDITIONAL</h6>
                                        </div>
                                        <p-table [value]="sectionAdditional" id="cate"
                                                 style="margin-top: 20px; margin-right: 30px;">

                                            <ng-template let-section pTemplate="body">

                                                <tr class="timeline">

                                                    <li>
                                                        <td [style.color]="(section.categorieSection.libelle) == (this.selectedsection.categorieSection.libelle)? 'orange' :'black' "
                                                            style="cursor: pointer; font-weight: 600;margin-left: 5px; font-size: 15px">
                                                            {{section.categorieSection.libelle}}</td>
                                                    </li>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>


                                </p-tabPanel>


                                <p-tabPanel header="Home work">
                                    <ng-template pTemplate="header">
                                        <img src="./assets/icons/home-work-icon.png"
                                             pTooltip="Home Work" tooltipPosition="top"
                                             class="homeWorkIcon">
                                    </ng-template>

                                </p-tabPanel>
                                <p-tabPanel header="Header III">
                                    <ng-template pTemplate="header">
                                        <img src="./assets/icons/icon-dictionnaire.png"
                                             pTooltip="Dictionary" tooltipPosition="top"
                                             class="homeWorkIcon">
                                    </ng-template>

                                    <p-table [paginator]="true" [rowHover]="true" [rows]="5" [value]="itemsDict"
                                             dataKey="id"
                                             id="wrd">

                                        <ng-template let-dict pTemplate="body">
                                            <tr>

                                                <td (click)="dictEdit(dict)"
                                                    style="font-weight: 800; text-align: center; cursor: pointer"><b
                                                        style="font-size: 15px; color: black;">{{dict.word}}</b> : <b
                                                        style="font-size: 20px; color: orange;">{{dict.definition}}</b>
                                                </td>
                                            </tr>
                                        </ng-template>

                                    </p-table>
                                    <!--                                    <div id="dictionnair" class="p-inputgroup"-->
                                    <!--                                         style="width: 0%; height: 0px; visibility: hidden; margin-bottom: 10px">-->
                                    <!--                                        <h5 style="margin-left: 5px; font-size: 25px; text-align: center"><b-->
                                    <!--                                                style="font-size: 20px; color: orange;">+</b>-->
                                    <!--                                            <u style="color: #8b8b90; margin-left: 10px">{{this.selectedDict.word}}</u>-->
                                    <!--                                            :  {{this.selectedDict.definition}}-->
                                    <!--                                        </h5>-->
                                    <!--                                    </div>-->
                                    <!--                                    <div class="p-inputgroup" style="width: 100%; align-content: center">-->
                                    <!--                                        <p-autoComplete (completeMethod)="filterDict($event)" [(ngModel)]="word"-->
                                    <!--                                                        [minLength]="1" [suggestions]="filteredDict"-->
                                    <!--                                                        field="word"></p-autoComplete>-->
                                    <!--                                        <button (click)="findByWord()" style="background-color: orange" icon="pi pi-search"-->
                                    <!--                                                pButton-->
                                    <!--                                                pRipple type="button"></button>-->
                                    <!--                                        <button (click)="openCreateDict()" icon="pi pi-plus" pButton pRipple-->
                                    <!--                                                style="background-color: #8b8b90"-->
                                    <!--                                                type="button"></button>-->
                                    <!--                                    </div>-->


                                </p-tabPanel>

                                <p-tabPanel header="Header III">
                                    <ng-template pTemplate="header">
                                        <img src="./assets/icons/icon-chat.png"
                                             pTooltip="Chat" tooltipPosition="top"
                                             class="homeWorkIcon">
                                    </ng-template>

                                    <app-chat1 id="chat"></app-chat1>

                                </p-tabPanel>
                            </p-tabView>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <div class="p-col-12">

        </div>

    </div>


    <app-etudiant-review-view></app-etudiant-review-view>
    <app-dictionary-create></app-dictionary-create>
    <app-dictionary-edit></app-dictionary-edit>
    <app-translate></app-translate>
</div>
